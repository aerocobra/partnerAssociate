<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record id="cashadvance_seq" model="ir.sequence">
			<field name="name">Associate code</field>
			<field name="code">partner.associate.code.sequence</field>
			<field name="padding">1</field>
			<field name="prefix">ASTIC-[</field>
			<field name="suffix">]</field>
		</record>
	</data>
	<data>
		<!-- search view-->
		<record model="ir.ui.view" id="partnerAssociateSearch_form">
			<field name="name">partnerAssociateSearch_form</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_res_partner_filter"/>
			<field name="arch" type="xml">
				<!-- replace default filters 2 show only associates-->
				<xpath expr="/search/filter[@name='customer']" position="attributes">
					<attribute name="domain">"[('is_company','=', True), ('x_bActiveMember', '=', True)]"</attribute>
				</xpath>
				<!-- filter name="customer" position="attributes">
					<attribute name="domain">"[('is_company','=', 1), ('customer','=',1), ('x_bActiveMember', '=', 1)]"</attribute>
				</filter -->
				<filter name="supplier" position="attributes">
					<attribute name="domain">"[('is_company','=', 1), ('supplier','=',1), ('x_bActiveMember', '=', 1)]"</attribute>
				</filter>
				<search>
					<filter name="old_member" string="Antiguos afiliados" domain="[('is_company','=', 1), ('x_bOldMember', '=', 1)]"/>
				</search>
			</field>
		</record>
	</data>
	<data>
		<!-- For the form view and id field (whatever) -->
		<record model="ir.ui.view" id="partnerAssociate_form">
			<field name="name">partnerAssociate_form</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form"/>
			<field name="arch" type="xml">
				<xpath expr="/form/*" position="before">
				<!-- new header with buttons-->
					<header>
						<button name="do_associate" type="object" string="Alta afiliado" class="oe_highlight" confirm="Confirmar el ALTA"
							attrs="{'invisible': [('x_bActiveMember','=', True)]}"/>
						<button name="do_DEassociate" type="object" string="Baja afiliado" class="oe_highlight" confirm="Confirmar la BAJA"
							attrs="{'invisible': [('x_bActiveMember','=', False)]}"/>
					</header>
				</xpath>
				<!-- folders -->
				<notebook position="inside">
					<page string="ASTIC" attrs="{'invisible': ['|',('is_company','!=', True), '&amp;',('x_bActiveMember', '=', False), ('x_bOldMember', '=',False)]}">
						<group>
							<field name="x_strState" readonly="1"/>
						</group>
						<group col="6" colspan="2">
							<group string="General data">
								<field name="x_bActiveMember" readonly="1"/>
								<field name="x_bOldMember" readonly="1" attrs="{'invisible': [('x_bActiveMember','=', True)]}"/>
								<field name="x_bDirectionBoard" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>

								<field name="x_serialAsticCode"/>
							</group>
							<group string="Dates">
								<field name="x_dateSignUp" readonly="1"/>
								<field name="x_dateUnsubscribe" readonly="1" attrs="{'invisible': [('x_bActiveMember','=', True)]}"/>

								<field name="x_eUnsubscribeReason" readonly="1" attrs="{'invisible': [('x_bActiveMember','=', True)]}"/>
							</group>
							<group string="Quotes">
								<field name="x_nAssociatedVehicles" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_fQuotaOne" widget="monetary" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_fQuotaThree" widget="monetary" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
							</group>
						</group>
						<group string="Dataos especiales" col="6" colspan="6">
							<group>
								<field name="x_nTIR_Block" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_nTIR_Certificate" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
							</group>
							<group>
								<field name="x_strAuthorizationTransport" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_nAuthorizationTransport" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
							</group>
							<group>
								<field name="x_strLicenceEU" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_strAuthorizationOperator" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
								<field name="x_nEmplyees" attrs="{'readonly': [('x_bActiveMember','!=', True)]}"/>
							</group>
						</group>
						<group col="6" colspan="6">
							<field name="x_idsTIR_Endorcement" nolabel="0" attrs="{'readonly': [('x_bActiveMember','!=', True)]}">
								<tree string="Avales">
									<field name="x_strNumber"/>
									<field name="x_dateSignUp"/>
									<field name="x_dateExpiration"/>
									<field name="x_eType"/>
									<field name="x_eState"/>
									<field name="x_fAmount"/>
								</tree>
								<form string="Avales">
									<field name="x_strNumber" string= "# aval"/>
									<field name="x_dateSignUp" string= "F aval"/>
									<field name="x_dateExpiration" string= "F vencim"/>
									<field name="x_eType" string= "Tipo"/>
									<field name="x_eState" string= "Estado"/>
									<field name="x_fAmount" string= "Importe"/>
								</form>
							</field>
						</group>
						<group col="6" colspan="6">
							<field name="x_idsHistory" readonly="1" nolabel="0">
								<tree string="Historial afiliaciones">
									<field name="x_dateSignUp"/>
									<field name="x_dateUnsubscribe"/>
									<field name="x_eUnsubscribeReason"/>
								</tree>
							</field>
						</group>
					</page>
				</notebook>
			</field>
		</record>
    </data>
</openerp>